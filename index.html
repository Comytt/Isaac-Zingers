<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="path/to/your/styles.css">
    <title>Isaac's Zingers Counter</title>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-auth.js"></script>
</head>
<body>
    <div>
        <h1>Isaac's Zingers Counter</h1>
        <p>How many zingers has Isaac made?</p>
        <div>
            <span id="counterValue">0</span>
        </div>
        <div>
            <p>Visitor count: <span id="visitorCount">0</span></p>
        </div>
        <button id="addZingerButton" style="display:none;">Add Zinger</button>
    </div>

    <!-- Authentication Modal -->
    <div id="authModal" style="display:none;">
        <div>
            <h2>Sign In to Add Zingers</h2>
            <input type="email" id="email" placeholder="Email" required>
            <input type="password" id="password" placeholder="Password" required>
            <button id="signInButton">Sign In</button>
            <button id="signUpButton">Sign Up</button>
            <p id="authError" style="color: red;"></p>
        </div>
    </div>

    <script>
        // Firebase config
        const firebaseConfig = {
            apiKey: "AIzaSyCq431flv_e7k_MQ7sgMYxjTUVoxI4wJww",
            authDomain: "isaaczingers.firebaseapp.com",
            projectId: "isaaczingers",
            storageBucket: "isaaczingers.firebasestorage.app",
            messagingSenderId: "1022887934210",
            appId: "1:1022887934210:web:a07c42b5be17074296aa1b",
            measurementId: "G-ENMFW1PNQE"
        };

        // Initialize Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const database = firebase.database(app);
        const auth = firebase.auth();

        // References to the counter and visitor count in the database
        const counterRef = database.ref('counter');
        const visitorCountRef = database.ref('visitorCount');

        // Get the elements
        const counterValue = document.getElementById('counterValue');
        const visitorCount = document.getElementById('visitorCount');
        const addZingerButton = document.getElementById('addZingerButton');
        const authModal = document.getElementById('authModal');
        const emailInput = document.getElementById('email');
        const passwordInput = document.getElementById('password');
        const authError = document.getElementById('authError');

        // Display visitor count
        visitorCountRef.on('value', snapshot => {
            const visitors = snapshot.val();
            visitorCount.textContent = visitors;
        });

        // Increment visitor count
        visitorCountRef.transaction(currentVisitors => {
            return (currentVisitors || 0) + 1;
        });

        // Listen for changes in the zinger count
        counterRef.on('value', snapshot => {
            const zingerCount = snapshot.val();
            counterValue.textContent = zingerCount;
        });

        // Show the button only if the user is authenticated
        auth.onAuthStateChanged(user => {
            if (user) {
                addZingerButton.style.display = "inline-block";
                authModal.style.display = "none";
            } else {
                authModal.style.display = "flex";
                addZingerButton.style.display = "none";
            }
        });

        // Handle Sign In
        document.getElementById('signInButton').addEventListener('click', () => {
            const email = emailInput.value;
            const password = passwordInput.value;
            auth.signInWithEmailAndPassword(email, password)
                .then(() => {
                    // Clear the form and hide modal
                    emailInput.value = '';
                    passwordInput.value = '';
                    authError.textContent = '';
                })
                .catch(error => {
                    authError.textContent = error.message;
                });
        });

        // Handle Sign Up
        document.getElementById('signUpButton').addEventListener('click', () => {
            const email = emailInput.value;
            const password = passwordInput.value;
            auth.createUserWithEmailAndPassword(email, password)
                .then(() => {
                    // Clear the form and hide modal
                    emailInput.value = '';
                    passwordInput.value = '';
                    authError.textContent = '';
                })
                .catch(error => {
                    authError.textContent = error.message;
                });
        });

        // Add Zinger button functionality
        addZingerButton.addEventListener('click', () => {
            counterRef.transaction(currentValue => {
                return (currentValue || 0) + 1;
            });
        });
    </script>
</body>
</html>
